#!/bin/sh

if [ -e '/tmp/UBUSDEAD' ]; then
	. /tmp/loader
	_system crashreboot 'ubus_hangs'
else
	touch '/tmp/UBUSDEAD'
	REST="$( ubus call system info )"

	case "$REST" in
		*'uptime'*)
			# https://dev.openwrt.org/ticket/14620
		;;
		*)
			. /tmp/loader
			_log do ubus_checker daemon alert "output strange: '$REST'"
		;;
	esac

	rm '/tmp/UBUSDEAD'
fi
