#!/bin/sh
case "$QUERY_STRING" in
	REDIRECTED=1*);;
	*)
		read WIFIADR FORKS 2>/dev/null </tmp/WELCOME_HELPER || FORKS="#####"
		[ ${#FORKS} -gt 0 ] && {
			cat /tmp/weblogin_cached_for_overload 2>/dev/null || {
				. /tmp/loader
				_weblogin htmlout_loginpage >/tmp/weblogin_cached_for_overload
				cat /tmp/weblogin_cached_for_overload 2>/dev/null
			}
			exit
		}
	;;
esac
echo -n >>/tmp/WELCOME_HELPER "#"	# raise counter, see cron.minutely
. /www/cgi-bin-welcome_stage2
